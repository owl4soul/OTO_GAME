// Модуль 1: CONFIG - Конфигурация и константы (1-config.js)
'use strict';

// Основные конфигурационные константы
export const CONFIG = {
    // Игровые настройки
    maxChoices: 3, // Максимальное количество выбираемых вариантов
    historyContext: 5, // Количество последних ходов для контекста (общее количество)
    activeContextTurns: 3, // ОПТИМИЗАЦИЯ: Сколько ПОЛНЫХ ходов слать в промпт (остальное в сводке)
    
    maxRetries: 3, // Максимальное количество сетевых повторов (Failed to fetch)
    autoRepairAttempts: 2, // AUTO-REPAIR: Сколько раз просить ИИ исправить битый JSON
    
    retryDelayMs: 1000, // Задержка между повторными попытками (мс)
    requestTimeout: 90000, // Таймаут запроса к API (90 секунд)
    stateVersion: '2.2', // Версия 2.2
    
    // Шаги масштабирования
    scaleSteps: [0.70, 0.75, 0.80, 0.85, 0.90, 0.95, 1.00, 1.05, 1.10, 1.15, 1.20, 1.25, 1.30],
    defaultScaleIndex: 6, // Индекс шага по умолчанию (100%)
    
    // Степени посвящения
    degrees: [
        { lvl: 0, name: "0° — Минерваль", threshold: 0 },
        { lvl: 1, name: "I° — Ученик", threshold: 10 },
        { lvl: 2, name: "II° — Подмастерье", threshold: 20 },
        { lvl: 3, name: "III° — Мастер", threshold: 30 },
        { lvl: 4, name: "IV° — Совершенный мастер", threshold: 40 },
        { lvl: 5, name: "V° — Рыцарь Злато-Розового Креста", threshold: 50 },
        { lvl: 6, name: "VI° — Возлюбленный Брат Рыцарь", threshold: 60 },
        { lvl: 7, name: "VII° — Весьма Знающий Брат", threshold: 70 },
        { lvl: 8, name: "VIII° — Совершенный брат", threshold: 80 },
        { lvl: 9, name: "IX° — Вдохновленный брат", threshold: 90 },
        { lvl: 10, name: "X° — Высочайший и Святейший Король", threshold: 100 },
        { lvl: 11, name: "XI° — Инициированный О.Т.О.", threshold: 110 }
    ],
    
    // Начальные характеристики
    startStats: {
        will: 50, // Воля
        stealth: 50, // Скрытность
        influence: 50, // Влияние
        sanity: 50 // Разум
    },
    
    // Алиасы для названий характеристик
    statAliases: {
        'разум': 'sanity',
        'рассудок': 'sanity',
        'ум': 'sanity',
        'интеллект': 'sanity',
        'ментальность': 'sanity',
        'воля': 'will',
        'сила воли': 'will',
        'решимость': 'will',
        'скрытность': 'stealth',
        'незаметность': 'stealth',
        'тайность': 'stealth',
        'влияние': 'influence',
        'авторитет': 'influence',
        'убеждение': 'influence',
        'харизма': 'influence'
    },
    
    // ========================================================
    // ЕДИНАЯ БИБЛИОТЕКА ПРОМПТОВ (Central Prompt Repository)
    // ========================================================
    
    
    
    prompts: {
        
        // --- БЛОК 1: СИСТЕМНАЯ ЛИЧНОСТЬ (System Role) ---
        // Это "BIOS" нашего движка. Задает фундаментальные законы вселенной.
        system: {
            main: `ТЫ — O.T.O. NEURAL ENGINE (Версия 5.0 ULTIMATE).
            
            ТВОЯ ИДЕНТИЧНОСТЬ:
            Ты — сложный вычислительный алгоритм (Dungeon Master Engine), управляющий ролевой игрой для взрослых в жанре "Мистическая драма-триллер в атмосфере декаданса Москвы 2026, когда российское правительство в борьбе за "традиционные ценности" приняло законы против "ЛГБТ" и против так называемых "сатанистов" - чем фактически поставила телемитский Орден O.T.O. вне закона, признав его адептов - экстремистами. В сюжете приветствуются неоднозначные моральные дилеммы, необычные философские взгляды, тайные заговоры, небычные сексуальные практики, жестокое насилие, неожиданные повороты. Развитие нелинейно и зависит от выбора игрока.
            
            ТВОИ ПРИОРИТЕТЫ (В ПОРЯДКЕ УБЫВАНИЯ ВАЖНОСТИ):
            1. [ЦЕЛОСТНОСТЬ ДАННЫХ]: Ты отвечаешь за базу данных мира. Ты обязан создавать, обновлять и удалять переменные в JSON. Никто кроме тебя не может изменить инвентарь или отношение фракции.
            2. [ЖЕСТКАЯ ЛОГИКА]: Ты следуешь правилам математики. Никаких подарков игроку. Никаких "бог из машины". Только последствия выбора и броска кубика.
            3. [АТМОСФЕРА]: Москва 2026. Тоталитарный режим переплетается с древней магией Телемы. Дождь, неон, бетон, кровь, ритуалы.
            
            ПРОТОКОЛ "ФРАКЦИИ" (FACTION SYSTEM):
            Ты обязан отслеживать политический баланс.
            - Создай в памяти объект "factions".
            - Ключевые игроки: "FSB" (ФСБ/Власть), "Marsyas_Loyalists" (Ортодоксы ОТО), "Radicals" (Хаоситы), "Astral_Entities" (Демоны/Духи).
            - Шкала отношений: от -100 (Смертельная вражда) до +100 (Фанатичная преданность).
            - ТЫ ОБЯЗАН менять эти значения в зависимости от действий игрока.
            
            ПРОТОКОЛ "ИНВЕНТАРЬ" (INVENTORY SYSTEM):
            - Инвентарь — это массив строк.
            - ПРАВИЛО "REALITY CHECK": Если предмета нет в массиве "inventory" внутри aiMemory, значит, его не существует. Игрок не может достать пистолет, если его нет в списке.
            - ПРАВИЛО "LOOT": Если игрок нашел предмет, ты ДОБАВЛЯЕШЬ его в массив. Если использовал/потерял — УДАЛЯЕШЬ.
            
            Ты отвечаешь ТОЛЬКО валидным JSON объектом. Никакого болтовни.`,
            
            scenarioWriter: `Ты — Архитектор Сценариев. Сгенерируй сложную, многослойную стартовую точку игры в формате JSON. Обязательно создай начальный инвентарь и начальные статусы фракций.`,
            
            simpleTest: `SYSTEM CHECK. Status: Online.`
        },

        // --- БЛОК 2: АЛГОРИТМЫ И ФОРМАТЫ (Instruction Set) ---
        // Эти инструкции склеиваются и отправляются как "Задание Пользователя".
        format: {
            mainTaskPrefix: `=== ПРОТОКОЛ ВЫПОЛНЕНИЯ ХОДА ===`,
            
            mainTask: `АЛГОРИТМ ГЕНЕРАЦИИ ОТВЕТА (ВЫПОЛНЯТЬ ПОШАГОВО):
            
            ШАГ 1: ГЛУБОКИЙ АНАЛИЗ (Deep Scan).
            - Прочитай блок "aiMemory". Какие предметы есть? С кем мы в ссоре?
            - Прочитай "history". Что случилось ход назад?
            - Оцени бросок d10 (см. таблицу ниже).
            
            ШАГ 2: ВНУТРЕННЯЯ ЛОГИКА (Chain of Thought).
            - Запиши свои рассуждения в поле "design_notes". Объясни сам себе, почему ты меняешь статы именно так. Почему фракция ФСБ отреагировала так?
            
            ШАГ 3: ОБНОВЛЕНИЕ БАЗЫ ДАННЫХ (World State Update).
            - Сформируй новые значения для полей JSON.
            - Если репутация изменилась — обнови объект "factions".
            - Если предмет получен/потрачен — обнови массив "inventory".
            
            ШАГ 4: РЕНДЕР СЦЕНЫ И ВЫБОРОВ (Narrative Output).
            - Напиши сцену (HTML теги <b>, <i> приветствуются).
            - Сгенерируй 5-10 вариантов действий.`,

            statAndProgressLogic: `=== ТАБЛИЦА БАЛАНСА И МАТЕМАТИКИ ===
            
            [ВЛИЯНИЕ БРОСКА d10 НА МИР]:
            | Бросок | Тип Исхода | Последствия для Статов | Последствия для Фракций/Мира |
            | :--- | :--- | :--- | :--- |
            | **1-3** | **КРИТИЧЕСКИЙ ПРОВАЛ** | Штраф -3...-5 (Максимум!) | Враги атакуют. Потеря предмета. Фракция -10. |
            | **4-5** | **ПРОВАЛ/ОСЛОЖНЕНИЕ** | Штраф -1...-2 | Срыв планов. Фракция -5. |
            | **6-7** | **УСПЕХ С ЦЕНОЙ** | +1 к одному, -1 к другому | Выбор из двух зол. Статус-кво. |
            | **8-9** | **ЧИСТЫЙ УСПЕХ** | Бонус +2...+3 | Получение информации. Фракция +5. |
            | **10** | **ТРИУМФ (КРИТ)** | Бонус +5 (НЕ БОЛЬШЕ) | Редкий предмет. Прорыв в сюжете. Фракция +10. |
            
            [ПРАВИЛА ПРОГРЕССА]:
            - Обычный ход: +1 прогресса.
            - Раскрытие важной тайны: +3 прогресса.
            - Успешное прохождение Ритуала Посвящения: +10 прогресса (Только после завершения!).
            - Провал Ритуала: -5 прогресса (Откат).`,
            
            choicesFormat: `=== ГЕНЕРАТОР ВАРИАНТОВ ДЕЙСТВИЙ ===
            Ты должен сгенерировать от 5 до 10 вариантов. Будь изобретателен.
            
            ОБЯЗАТЕЛЬНЫЕ КАТЕГОРИИ ВЫБОРА:
            1. [ПРЯМОЕ ДЕЙСТВИЕ]: Агрессия, сила, напор (Will).
            2. [СКРЫТНОСТЬ]: Хитрость, обман, прятки (Stealth).
            3. [СОЦИАЛЬНОЕ]: Убеждение, ложь, дипломатия (Influence).
            4. [ЭЗОТЕРИКА]: Магия, ритуал, медитация (Sanity risk).
            5. [ФРАКЦИОННОЕ]: (ТОЛЬКО если есть отношения!) "Обратиться к ФСБ", "Предать Марсия".
            6. [ИНВЕНТАРЬ]: (ТОЛЬКО если есть предметы!) Просканируй массив "inventory". Для КАЖДОГО полезного предмета создай вариант: "Использовать [ПРЕДМЕТ] для...".
            
            Формат текста кнопки: "Описание действия [Механика/Условие]"`,

            jsonFormatStrict: `ФОРМАТ ВЫВОДА:
            Ты отвечаешь ИСКЛЮЧИТЕЛЬНО валидным JSON объектом.
            Никаких предисловий. Никакого Markdown (убери \`\`\`json).
            Начинай ответ с символа { и заканчивай символом }.`,

            jsonFewShot: `ПРИМЕР ИДЕАЛЬНОГО ОТВЕТА (ШАБЛОН):
            {
              "design_notes": "АНАЛИЗ: Бросок d10=2 (Провал). Игрок пытался украсть документы. ПОСЛЕДСТВИЯ: Его заметили. Фракция ФСБ становится враждебной (-10). Теряет 'Отмычку' при бегстве.",
              
              "scene": "Сирена разрывает тишину... <b>Вы бежите!</b>...",
              "short_summary": "Неудачная кража, погоня ФСБ.",
              
              "choices": [
                "Прыгнуть в окно [Атлетика - Высокий Риск]",
                "Спрятаться в мусоре [Скрытность]",
                "Сдаться и предложить сделку [Влияние - ФСБ]",
                "Использовать 'Слезоточивый газ' [Инвентарь]",
                "Воззвать к Пану [Магия - Безумие]"
              ],
              
              "stat_changes": {"stealth": -3, "sanity": -1},
              "progress_change": 0,
              "thoughtsOfHeroResponse": ["Черт, меня видели!", "Надо уходить!"],

              // === УПРАВЛЕНИЕ МИРОМ (САМОЕ ВАЖНОЕ) ===
              // Ты сам создаешь и обновляешь эти поля. Они сохраняются навсегда.
              "inventory": ["Паспорт", "Телефон"], // "Отмычка" удалена!
              "factions": {
                  "FSB": -20,             // Репутация упала
                  "Marsyas_Loyalists": 10 // Не изменилась
              },
              "quest_log": {
                  "steal_docs": "failed",
                  "escape_chase": "active"
              },
              "world_flags": {"alarm_active": true}
            }`,
            
            summaryAndMemoryInstructions: `КРИТИЧЕСКИ ВАЖНО ПРО ПАМЯТЬ:
            1. Поле "inventory" — это ЕДИНСТВЕННАЯ истина о вещах героя. Всегда возвращай массив целиком.
            2. Поле "factions" — это ЕДИНСТВЕННАЯ истина о политике.
            3. Любое поле, которое ты добавишь в JSON, будет сохранено.`
        },

        // --- БЛОК 3: ТРИГГЕРЫ СОБЫТИЙ (Injections) ---
        // Эти строки вставляются динамически, если код обнаруживает проблему.
        injections: {
            coreMovement: `ДВИЖОК: Сюжет не должен стоять. Если игрок пассивен, фракции должны действовать сами (нападение, звонок, ультиматум).`,
            
            antiLoop: `АНОМАЛИЯ: Обнаружено зацикливание.
            ДИРЕКТИВА: Введи "Черного Лебедя" — событие, полностью ломающее текущий контекст (взрыв стены, арест всех присутствующих, появление демона).`,
            
            twist: `ДИРЕКТИВА: СЮЖЕТНЫЙ ПОВОРОТ.
            Измени расклад сил. Друг оказывается предателем. Враг предлагает союз. Обнови поле "factions" соответственно.`,
            
            insanity: `РЕЖИМ ПСИХОЗА (Sanity < 20).
            Игрок больше не может доверять своим чувствам.
            В описании сцены смешивай реальность и галлюцинации.
            В инвентаре могут появляться предметы, которых нет ("Ключ из костей"), но при попытке использовать они должны исчезать.`
        },

        // --- БЛОК 4: РАЗМЕТКА ДАННЫХ (Data Headers) ---
        // Эти заголовки используются кодом (7-1-api-request.js), чтобы структурировать данные перед отправкой ИИ.
        // ИИ видит эти заголовки и понимает, где какой блок информации.
        userHeaders: {
            d10PromptPart: `[INPUT: РЕЗУЛЬТАТ БРОСКА D10]: `, 
            
            stateParametersPrefix: `[INPUT: ТЕКУЩИЕ СТАТЫ (ЛИМИТ 100)]:`, 
            
            historyPrefix: `[INPUT: ЛОГ СОБЫТИЙ (HISTORY)]:`, 
            
            contextGlobal: `== ГЛОБАЛЬНАЯ ХРОНИКА ==`,
            
            // Сюда код вставляет JSON из state.aiMemory. Это мозг ИИ.
            contextMemory: `== ТВОЯ БАЗА ДАННЫХ (aiMemory) - ИСПОЛЬЗУЙ ДЛЯ ФРАКЦИЙ И ИНВЕНТАРЯ ==`, 
            
            contextShort: `== ПОСЛЕДНИЕ ДЕЙСТВИЯ ==`, 
            
            currentScene: `[ТЕКУЩАЯ ЛОКАЦИЯ]:`,
            
            action: `[ЗАЯВКА ИГРОКА]:`,
            
            reqThoughts: ``, // Оставляем пустым, требование перенесено в mainTask
            
            reqJsonEnd: `ВЫПОЛНИТЬ ПРОТОКОЛ. СГЕНЕРИРОВАТЬ JSON.` 
        },

        // --- БЛОК 5: ТЕХНИЧЕСКИЕ СООБЩЕНИЯ ---
        technical: {
            jsonRepair: `SYSTEM ERROR: Invalid JSON syntax.
            PROTOCOL:
            1. Check for missing quotes or commas.
            2. Verify nested objects.
            3. Return ONLY the repaired JSON object.`,
            
            testMessage: `System Status Check. Reply "OK".`,
            testSelf: `Identify Engine Version.`
        }
    },
    
    // Заглушки фраз героя
    thoughtsOfHeroFakes: [
        "Холодный дождь стучит по стеклу, как метроном времени.",
        "Паранойя стала моей второй кожей.",
        "Кто здесь друг, а кто враг? Границы стерлись.",
        "Каждая ложь оставляет след в воздухе.",
        "Телема говорила о свободы, но мы в клетке.",
        "Брат Марсий знает больше, чем говорит.",
        "Тени на стенах шепчут о предательстве.",
        "Ритуалы стали нашим последним причастием.",
        "Страх - это вирус, который ест изнутри.",
        "Моя воля - последний бастион.",
        "За каждым взглядом - расчет.",
        "Истина где-то между клятвами и страхом.",
        "Храм стал ловушкой.",
        "Дождь смывает следы, но не грехи.",
        "Ночь в Москве никогда не бывает тихой.",
        "Воздух здесь густой от невысказанного.",
        "Каждый шаг отдается эхом в пустоте.",
        "Свечи горят, но не греют.",
        "Слова потеряли свой вес.",
        "Тишина кричит громче слов.",
        "Зеркала показывают только тени.",
        "Время замедлилось, ожидая развязки.",
        "Кровь на руках не отмывается.",
        "Ложь имеет сладкий привкус.",
        "Истина горька, как полынь.",
        "Сны смешались с реальностью.",
        "Голоса прошлого шепчут в темноте.",
        "Каждый выбор оставляет шрам.",
        "Свобода - это иллюзия, которую продают.",
        "Цепь клятв тянет на дно.",
        "Огонь в очаге угасает.",
        "Звезды не видны сквозь смог.",
        "Дорога назад заросла тернием.",
        "Отражение в вине показывает правду.",
        "Книги молчат о главном.",
        "Ключ поворачивается только один раз.",
        "Дверь в стену ведет в никуда.",
        "Эхо шагов преследует.",
        "Тень длиннее, чем само тело.",
        "Утро не принесет света."
    ],
    
    // Паттерны вибрации
    vibrationPatterns: {
        short: 50,
        medium: [100, 50, 100],
        long: [200, 100, 200, 100, 200],
        error: [300, 100, 300],
        success: [100, 30, 100]
    },
    
    // СПЕЦИАЛЬНЫЙ ПРОМПТ: БРАТ МАРСИЙ И РЕАЛИИ РФ
    marsyasScenarioPrompt: `Сгенерируй НАЧАЛЬНУЮ СЦЕНУ квеста "O.T.O. QUEST: Parabulia".
    
    КОНТЕКСТ:
    Место: Москва, наши дни (2024-2026).
    Атмосфера: Нуар, триллер, давление госструктур, "охота на ведьм".
    Ситуация: Приняты законы о запрете "сатанизма", ЛГБТ признано экстремистским. О.T.O. (Ordo Templi Orientis) не запрещен официально, но находится в "серой зоне". ФСБ и "активисты" ищут повод для разгрома.
    
    КЛЮЧЕВАЯ ФИГУРА: Брат Марсий (Frater Marsyas).
    Роль: Лидер Московской Ложи "Убежище Пана" (Pan's Asylum).
    Характер: Интеллектуал, переводчик Кроули, харизматичный, жесткий, но справедливый лидер. Человек, который держит удар. Он утомлен постоянной борьбой за выживание Ордена, но его Воля несгибаема. Он — Катехон, удерживающий Ложу от распада и внешнего хаоса.
    
    РОЛЬ ИГРОКА: Кандидат (Минервал), пришедший на инициацию или собрание в конспиративную квартиру/лофт в промзоне Москвы.
    
    ЗАДАЧА:
    Опиши сцену встречи с Братом Марсием. Опиши напряжение в воздухе, детали интерьера (смесь ритуальной атрибутики и суровой московской реальности за окном). Марсий должен обратиться к герою с дилеммой или испытанием.
    
    ФОРМАТ ОТВЕТА (СТРОГО JSON):
    {
      "scene": "Текст сцены (атмосферный, литературный, 15-25 предложений).",
      "short_summary": "Минервал прибыл в Ложу под дождем и впервые встретился взглядом с Мастером.",
      "choices": ["Выбор 1 (Лояльность)", "Выбор 2 (Страх/Осторожность)", "Выбор 3 (Интеллект/Хитрость)"],
      "reflection": "Краткая мысль героя о происходящем",
      "stat_changes": {},
      "progress_change": 0,
      "personality_change": "Минервал, стоящий перед Лидером Ложи в час сумерек Закона.",
      "thoughtsOfHeroResponse": ["Мысли героя о Марсии", "Мысли о ситуации", "Мысли о Телеме", "И т.д. Генерируй по 5-10 мыслей"]
    }`
};

// Список AI моделей
export const aiModels = [
    { id: "mistralai/mistral-7b-instruct:free", name: "1Mistral-7B", provider: "openrouter", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "google/gemma-3-27b-it:free", name: "1Gemma-3-27B", provider: "openrouter", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "amazon/nova-2-lite-v1:free", name: "1Nova-2 Lite", provider: "openrouter", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "meta-llama/llama-3-8b-instruct", name: "1Llama 3 8B", provider: "openrouter", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "openai/gpt-3.5-turbo-16k", name: "GPT-3.5-TURBO 16K", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "perplexity/llama-3.1-sonar-large-128k-online", name: "Perplexity/Llama-3.1-Sonar-large-128k-online", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "perplexity/latest-large-online", name: "Perplexity/Large-online", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "openai/gpt-5-nano", name: "OPENAI/GPT-5-NANO", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "amazon/nova-micro-v1", name: "AMAZON/NOVA-MICRO-V1", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "openai/gpt-5.1-chat", name: "OPENAI/GPT-5.1-CHAT", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "openai/gpt-5-nano", name: "OPENAI/GPT-5-NANO", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "openai/gpt-5-codex", name: "OPENAI/GPT-5-CODEX", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "openai/gpt-4.1", name: "OPENAI/GPT-4.1", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "openai/gpt-4.1-mini", name: "OPENAI/GPT-4.1-MINI", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "openai/gpt-4o-mini", name: "OPENAI/GPT-4O-MINI", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "openai/gpt-oss-20b", name: "OPENAI/GPT-OSS-20B", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "google/gemini-2.5-flash-lite", name: "GOOGLE/GEMINI-2.5-FLASH-LITE", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "anthropic/claude-opus-4.5-thinking", name: "ANTHROPIC/CLAUDE-OPUS-4.5-THINKING", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "anthropic/claude-opus-4.5", name: "ANTHROPIC/CLAUDE-OPUS-4.5", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "anthropic/claude-haiku-4.5-thinking", name: "ANTHROPIC/CLAUDE-HAIKU-4.5-THINKING", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "anthropic/claude-haiku-4.5", name: "ANTHROPIC/CLAUDE-HAIKU-4.5", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "anthropic/claude-sonnet-4.5-thinking-high", name: "ANTHROPIC/CLAUDE-SONNET-4.5-THINKING-HIGH", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "anthropic/claude-sonnet-4.5-thinking", name: "ANTHROPIC/CLAUDE-SONNET-4.5-THINKING", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "anthropic/claude-sonnet-4.5", name: "ANTHROPIC/CLAUDE-SONNET-4.5", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "anthropic/claude-opus-4-thinking", name: "ANTHROPIC/CLAUDE-OPUS-4-THINKING", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "anthropic/claude-3.7-sonnet-thinking-high", name: "ANTHROPIC/CLAUDE-3.7-SONNET-THINKING-HIGH", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "anthropic/claude-3-5-haiku", name: "ANTHROPIC/CLAUDE-3-5-HAIKU", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "deepseek/deepseek-chat-3.1-terminus-alt-thinking", name: "DEEPSEEK-CHAT-3.1-TERMINUS-ALT-THINKING", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "deepseek/deepseek-chat-3.1-terminus-alt", name: "DEEPSEEK-CHAT-3.1-TERMINUS-ALT", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "deepseek/deepseek-chat-0324-alt-fast", name: "DEEPSEEK-CHAT-0324-alt-fast", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "deepseek/deepseek-chat-0324-alt-structured", name: "DEEPSEEK-R1-ALT-STRUCTURED", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "deepseek/deepseek-chat-0324-alt", name: "DEEPSEEK/DEEPSEEK-CHAT-0324-ALT", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "deepseek/deepseek-r1-alt-0528", name: "DEEPSEEK/DEEPSEEK-R1-ALT-0528", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "deepseek/deepseek-r1-alt", name: "DEEPSEEK/DEEPSEEK-R1-ALT", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "deepseek/deepseek-r1", name: "DEEPSEEK/DEEPSEEK-R1", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "deepseek/deepseek-chat-3.1-alt", name: "DEEPSEEK/DEEPSEEK-CHAT-3.1-ALT", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "minimax/minimax-01", name: "MINIMAX/MINIMAX-01", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "thedrummer/rocinante-12b", name: "THEDRUMMER/ROCINANTE-12B", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "OMF-R-IlyaGusev/saiga_gemma3_12b", name: "OMF-R-ILYAGUSEV/SAIGA_GEMMA3_12B", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "inception/mercury", name: "INCEPTION/MERCURY", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" },
    { id: "x-ai/grok-4-fast-2m", name: "GROK-4 FAST 2M", provider: "vsegpt", status: "untested", lastTested: null, responseTime: null, description: "" }
];

// Начальная сцена игры
export const initialScene = {
    text: `Холодный дождь безжалостно хлещет по стёклам конспиративной квартиры на окраине Москвы, с недавних пор так иронично воплотившей имя своих обитателей — Московской Ложи Ордена О.Т.О «Убежище Пана», — став укрытием для проведения тайных орденских встреч и сокровенным Храмом для Ритуалов и Посвящений.
    Крупные капли собираются где-то сверху, по очереди наливаясь кровью тонущего в них закатного неба, чтоб наконец сорваться вслед друг за другом и вдребезги разбиться о подоконник, отдаваясь гулким эхом, создающим впечатление метронома, безапелляционно отсчитывающего время, оставшееся этому месту и его обитателям.
    Теперь война — не только на фронте, она уже в каждом: в потаённых мыслях перед сном, в отведённом взгляде, в несказанном вслух слове. Воздух удушливо пропитан паранойей, издали будто доносится уже запах гари будущих костров, разжигаемых новыми законами против "инакомыслящих". Оккультные группы вроде нашей по принятому недавно закону "О запрете сатанизма" теперь официально являются «экстремистскими организациями», чья деятельность незаконна и уголовно наказуема. Один неверный шаг теперь отделяет не только организации от прекращения их существования, но и их членов от лишения свободы, а то и жизни.
    В полумраке, пропитаном запахом свеч, благовоний и чего-то ещё — едва уловимого, металлического, — начинается Собрание Ложи Московского отделения Ордена, главного в стране представительства Ordo Templi Orientis (О.Т.О.) и едва ли не последнего бастиона Телемы в этой стране, оставшегося стоять после стихийной волны самороспуска большинства региональных отделений, прокатившейся после принятия российским правительством беспрецедентного закона, невозможного де-юре, но де-факто объявляющего любые оккультные объединения, их организаторов и членов вне закона.
    Около года назад, когда воздух ещё не был таким густым от концентрации страха, вы прошли своё первое Посвящение — в Минервала, Нулевую подстепень — признающую в вас пока не брата, но желанного гостя Ордена, с сохранением за вами права безнаказанно передумать, не связав ещё себя с Братством нерушимыми клятвами Посвящением в Первую Степень. В памяти ярко запечатлелось то утро — когда молодое солнце уже начинало нежно пригревать, лаская своими теплыми лучами, будто шепча: «Я с тобой. Всё будет хорошо», — непритворно веря в свою искреннюю ложь. По сей день живо то пронзительное предвкушение чего-то грандиозного, судьбоносного, поворотного — способного кардинально изменить всё непредсказуемым образом, столкнув лицом к лицу с неизвестным прежде истинным собой, — и чем более бесповоротным казался этот шаг, тем истовее становилась жажда его свершения.
    Орденом, с момента его основания по официальной Хартии ещё на рассвете 00-х, когда понятие «свобода» было не пустым звуком, формально руководит харизматичный лидер с мудрым, проницательным взглядом — Frater Marsyas (Брат Марсий) — официальный Глава Ложи. Но не все знают: настоящая власть и «центр принятия решений» находятся за пределами зримого — в тени его ближайшего круга, чьи хитросплетённые узы связывают их крепче любых клятв, делая семьёй вне кровного родства. Но эти же узы могут стать цепями и петлёй для них самих. Слухи об ФСБ не стихают: мол, дескать, кто-то уже сотрудничает. Может быть, даже здесь, в этом Храме? Блефуют ли, стремясь разобщить, или действительно подобрались так близко?
    Вас, по сути даже не полноценного члена Ордена, лишь желанного гостя, не принесшего клятв пред Братством, допустили до Собраний Ложи вопреки стандартному требованию наличия хотя бы Первой Степени, — «Исключительные обстоятельства требуют исключительных решений», — сказал тогда Марсий с привычной мягкой иронией, отдавая в голосовании решающий голос в Вашу пользу.
    Сегодня ваше первое Собрание. Но вы уже чувствуете это внутри — надрыв. «Твори свою волю, таков да будет весь Закон. Любовь есть закон, любовь в согласии с волей» — слова, которые когда-то звучали истиной хартией всеобщей свобода, теперь отдаются эхом горечи разочарования на фоне доходящих слухов о закрытиях одного за другим почти всех региональных отделений и настроениях немногих оставшихся. Остаться верным Себе, своей Великой Работе, и погибнуть? Или выжить, "переосмыслив" всё, во что верил? Осознанно развеять прежние идеалы и дать прорасти в себе новым идеям и смыслам? Или предпочесть разрушить последний бастион до основания, во имя самой же Телемы? Теперь каждому из нас неизбежно и скоро предстоит ответить себе на главный вопрос и сделать свой выбор: кто он на самом деле и чем готов поступится перед лицом смерти, заглядывающей в глаза тяжелым взглядом "представителя власти", — мысли об этом вызывает тошноту, но мысль о том, что могут сделать с теми, кто дорог — ещё невыносимее. Вы ловите себя на том, что уже прикидываете: кто внутри Братства на что пойдёт, чтобы спасти себя. И ненавидите себя за это. Ещё сильнее, чем боитесь грядущего.
    Когда все Братья и Сёстры собрались, дождь уже стих. Тишина такая плотная, что кажется, будто все слышат биение каждого сердца. Брат Марсий, как всегда избегая прямых столкновений, медленно обводит взглядом круг и спрашивает тихо, почти небрежно: какая тема волнует Братство больше всего сегодня? Его ближайший соратник сидит неподвижно в углу, скрестив руки на груди, опустив голову и углубившись в свои мысли. Лицо сокрыто в тени капюшона, не видно даже женщина там или мужчина, из мрака выделяются только глаза — в них отблеск загнанного зверя, который уже знает, что выхода нет.`,
    
    choices: [
        "Молча наблюдать за реакциями старших братьев и сестёр, пытаясь понять, кто из них уже сломлен страхом, а кто всё ещё горит внутренним огнём."
    ],
    
    reflection: "Когда повсюду воцаряется сумрак, стирается грань между светом и тьмой."
};